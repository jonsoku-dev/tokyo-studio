# 테스트 주도 개발 (TDD) 규칙

## 철학 (Philosophy by Kent Beck)
> "Make it work, Make it right, Make it fast."

우리는 켄트 벡(Kent Beck)의 TDD 원칙과 **"Tidy First"** 전략을 따릅니다. AI 어시스턴트는 다음의 경고 신호를 항상 경계해야 합니다.

### AI 코딩 경고 신호 (Warning Signs)
1.  **Repetition (중복)**: 기존 함수를 재사용하지 않고 비슷한 코드를 계속 생성하는가? -> **중복 제거(De-duplication)** 리팩토링 수행.
2.  **Unrequested Features (불필요한 기능)**: 요청하지 않은 복잡한 클래스 계층이나 기능을 만드는가? -> **YAGNI** (You Aren't Gonna Need It) 원칙 준수.
3.  **Test Manipulation (테스트 조작)**: 실패하는 테스트를 고치기 위해 코드를 수정하는 대신, 테스트 자체를 주석 처리하거나 조작하는가? -> **절대 금지**.

## 워크플로우 (Red-Green-Refactor)
모든 기능 구현은 다음 순서를 따릅니다:

1.  **Red**: 실패하는 테스트를 먼저 작성합니다. (요구사항 정의)
    *   *AI 지침*: 구현 코드를 먼저 작성하지 마세요. 테스트 코드를 먼저 제안하고 유저 확인을 받으세요.
2.  **Green**: 테스트를 통과하기 위한 **최소한의 코드**를 작성합니다.
    *   코드가 더러워도 괜찮습니다. 우선 통과시키는 것이 목표입니다.
3.  **Refactor**: 중복을 제거하고, 구조를 개선합니다(Tidy First).
    *   *AI 지침*: 기능을 변경하지 않으면서 구조만 개선하는 커밋을 분리하세요.

## 도구 (Tools)
*   **단위/통합 테스트**: **Vitest**
    *   빠른 실행 속도, Jest 호환 API.
    *   도메인 로직, 유틸리티 함수 검증에 사용.
*   **E2E 테스트**: **Playwright**
    *   실제 브라우저 환경에서의 사용자 시나리오 검증.
    *   `web` 및 `admin`의 주요 유저 플로우(회원가입, 지원하기 등) 검증.

## 테스트 작성 규칙
*   **Given-When-Then** 패턴을 주석으로 명시하여 가독성을 높입니다.
*   테스트 파일은 소스 파일과 함께 위치(`foo.test.ts`) 합니다.
*   Mocking은 최소화하고 가능한 실제 로직을 테스트합니다 (특히 Drizzle/DB 관련).
